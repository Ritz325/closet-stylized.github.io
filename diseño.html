<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Closet stylized - Diseñador de Prendas</title>
    <!-- Script para model-viewer -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0b2e 20%, #2d1b4e 40%, #1a1a2e 60%, #0f0f0f 100%);
            min-height: 100vh;
            color: white;
            position: relative;
            overflow-x: hidden;
        }

        /* Efectos de fondo galáctico mejorados */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at top left, rgba(147, 51, 234, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at top right, rgba(168, 85, 247, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at bottom left, rgba(88, 28, 135, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(79, 70, 229, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 30% 60%, rgba(147, 51, 234, 0.05) 0%, transparent 40%);
            pointer-events: none;
            z-index: -1;
            animation: cosmic-drift 20s ease-in-out infinite alternate;
        }

        @keyframes cosmic-drift {
            0% { transform: translateX(0) translateY(0) scale(1); }
            100% { transform: translateX(10px) translateY(-10px) scale(1.02); }
        }

        .header {
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(25px);
            border-bottom: 1px solid rgba(147, 51, 234, 0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #9333ea 0%, #c084fc 50%, #a855f7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(147, 51, 234, 0.6);
            letter-spacing: -0.5px;
        }

        .nav {
            display: flex;
            gap: 35px;
            align-items: center;
        }

        .nav a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.4s ease;
            padding: 12px 20px;
            border-radius: 25px;
            position: relative;
            font-size: 0.95rem;
        }

        .nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.1), rgba(168, 85, 247, 0.1));
            border-radius: 25px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .nav a:hover::before {
            opacity: 1;
        }

        .nav a:hover {
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(147, 51, 234, 0.4);
        }

        .cart {
            background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: 700;
            position: relative;
            border: 1px solid rgba(192, 132, 252, 0.3);
            transition: all 0.3s ease;
        }

        .cart:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(147, 51, 234, 0.5);
        }

        .hero-section {
            background: linear-gradient(135deg, #0f0f0f 0%, #1a0b2e 25%, #2d1b4e 50%, #1a1a2e 75%, #0a0a0a 100%);
            padding: 100px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse at 20% 30%, rgba(147, 51, 234, 0.08) 0%, transparent 60%),
                radial-gradient(ellipse at 80% 70%, rgba(88, 28, 135, 0.12) 0%, transparent 60%),
                radial-gradient(circle at 50% 50%, rgba(168, 85, 247, 0.03) 0%, transparent 70%);
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin: 0 auto;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            font-weight: 800;
            background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 50%, #a5b4fc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 40px rgba(147, 51, 234, 0.8);
            letter-spacing: -1px;
        }

        .hero-content p {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 50px;
            color: #c7d2fe;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 50px 30px;
        }

        .section-title {
            background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 40px;
            text-align: center;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(135deg, #9333ea, #c084fc);
            border-radius: 2px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 420px;
            gap: 50px;
            margin-top: 40px;
        }

        .design-area {
            background: linear-gradient(145deg, rgba(10, 10, 10, 0.8), rgba(88, 28, 135, 0.15));
            backdrop-filter: blur(25px);
            border-radius: 25px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(147, 51, 234, 0.3);
            position: relative;
        }

        .design-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.05), rgba(88, 28, 135, 0.05));
            border-radius: 25px;
            pointer-events: none;
        }

        .garment-display {
            position: relative;
            width: 350px;
            height: 450px;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(248, 250, 252, 0.95));
            border-radius: 20px;
            box-shadow: 
                0 25px 80px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            overflow: hidden;
            border: 1px solid rgba(147, 51, 234, 0.2);
        }

        .garment-svg {
            width: 280px;
            height: 380px;
            transition: all 0.3s ease;
            display: none;
        }

        model-viewer {
            width: 100%;
            height: 100%;
            border-radius: 20px;
            background: transparent;
        }

        .view-controls {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 100;
            display: flex;
            gap: 8px;
        }

        .view-btn {
            background: linear-gradient(135deg, #581c87, #9333ea);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 700;
            transition: all 0.3s;
            border: 1px solid rgba(192, 132, 252, 0.3);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .view-btn:hover {
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            box-shadow: 0 8px 25px rgba(147, 51, 234, 0.4);
            transform: translateY(-2px);
        }

        .view-btn.active {
            background: linear-gradient(135deg, #9333ea, #c084fc);
            box-shadow: 0 0 20px rgba(147, 51, 234, 0.6);
        }

        .garment-info {
            text-align: center;
            background: linear-gradient(145deg, rgba(88, 28, 135, 0.7), rgba(10, 10, 10, 0.9));
            backdrop-filter: blur(25px);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 100%;
            margin-bottom: 25px;
            border: 1px solid rgba(147, 51, 234, 0.3);
            position: relative;
            z-index: 2;
        }

        .garment-info h4 {
            font-size: 1.4rem;
            margin-bottom: 12px;
            color: #e0e7ff;
            font-weight: 700;
        }

        .garment-info p {
            color: #c7d2fe;
            font-size: 1rem;
            opacity: 0.9;
        }

        .price-display {
            background: linear-gradient(135deg, #581c87, #9333ea, #c084fc);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.4rem;
            font-weight: 800;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(147, 51, 234, 0.5);
            border: 1px solid rgba(192, 132, 252, 0.3);
            position: relative;
            z-index: 2;
        }

        .controls-panel {
            background: linear-gradient(145deg, rgba(10, 10, 10, 0.8), rgba(88, 28, 135, 0.15));
            backdrop-filter: blur(25px);
            border-radius: 25px;
            padding: 35px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(147, 51, 234, 0.3);
            position: relative;
        }

        .controls-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.05), rgba(88, 28, 135, 0.05));
            border-radius: 25px;
            pointer-events: none;
        }

        .control-section {
            margin-bottom: 35px;
            position: relative;
            z-index: 2;
        }

        .control-section h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #e0e7ff;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
        }

        .garment-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .garment-btn {
            padding: 16px;
            border: 2px solid rgba(147, 51, 234, 0.4);
            background: linear-gradient(145deg, rgba(88, 28, 135, 0.4), rgba(10, 10, 10, 0.8));
            backdrop-filter: blur(15px);
            color: white;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .garment-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .garment-btn:hover::before {
            left: 100%;
        }

        .garment-btn:hover {
            border-color: #9333ea;
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(147, 51, 234, 0.4);
            background: linear-gradient(145deg, rgba(88, 28, 135, 0.6), rgba(10, 10, 10, 0.6));
        }

        .garment-btn.active {
            border-color: #c084fc;
            background: linear-gradient(135deg, #581c87, #9333ea);
            color: white;
            box-shadow: 0 10px 30px rgba(147, 51, 234, 0.5);
            transform: translateY(-2px);
        }

        .color-palette {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 15px;
        }

        .color-option {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .color-option::after {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 50%;
            background: linear-gradient(135deg, transparent, rgba(147, 51, 234, 0.3));
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .color-option:hover {
            transform: scale(1.15);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        .color-option:hover::after {
            opacity: 1;
        }

        .color-option.active {
            border-color: #c084fc;
            transform: scale(1.2);
            box-shadow: 0 0 0 4px rgba(147, 51, 234, 0.3);
        }

        .upload-area {
            border: 2px dashed rgba(147, 51, 234, 0.6);
            border-radius: 20px;
            padding: 50px 25px;
            text-align: center;
            background: linear-gradient(145deg, rgba(88, 28, 135, 0.3), rgba(10, 10, 10, 0.8));
            backdrop-filter: blur(15px);
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            color: white;
            z-index: 2;
        }

        .upload-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.1), rgba(88, 28, 135, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .upload-area:hover::before {
            opacity: 1;
        }

        .upload-area:hover {
            border-color: #c084fc;
            background: linear-gradient(145deg, rgba(88, 28, 135, 0.5), rgba(10, 10, 10, 0.6));
            transform: scale(1.02);
        }

        .upload-area.dragover {
            border-color: #c084fc;
            background: linear-gradient(145deg, rgba(88, 28, 135, 0.5), rgba(10, 10, 10, 0.6));
            transform: scale(1.03);
            box-shadow: 0 15px 40px rgba(147, 51, 234, 0.3);
        }

        .upload-circle {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(88, 28, 135, 0.6), rgba(147, 51, 234, 0.4));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            border: 2px solid rgba(147, 51, 234, 0.4);
            transition: all 0.3s ease;
        }

        .upload-area:hover .upload-circle {
            border-color: #c084fc;
            background: linear-gradient(135deg, rgba(88, 28, 135, 0.8), rgba(147, 51, 234, 0.6));
            transform: rotate(10deg) scale(1.1);
        }

        .upload-text {
            font-weight: 700;
            color: #e0e7ff;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .upload-subtext {
            color: #c7d2fe;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .file-input {
            display: none;
        }

        .pulse {
            animation: cosmic-pulse 3s infinite;
        }

        @keyframes cosmic-pulse {
            0% { transform: scale(1); opacity: 1; box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.7); }
            50% { transform: scale(1.05); opacity: 0.8; }
            70% { box-shadow: 0 0 0 10px rgba(147, 51, 234, 0); }
            100% { transform: scale(1); opacity: 1; box-shadow: 0 0 0 0 rgba(147, 51, 234, 0); }
        }

        .products-preview {
            background: linear-gradient(145deg, rgba(10, 10, 10, 0.8), rgba(88, 28, 135, 0.15));
            backdrop-filter: blur(25px);
            border-radius: 25px;
            padding: 40px;
            margin-top: 50px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(147, 51, 234, 0.3);
            position: relative;
        }

        .products-preview::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.05), rgba(88, 28, 135, 0.05));
            border-radius: 25px;
            pointer-events: none;
        }

        .products-preview h3 {
            color: white;
            margin-bottom: 30px;
            text-align: center;
            font-size: 1.8rem;
            font-weight: 700;
            position: relative;
            z-index: 2;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 25px;
            position: relative;
            z-index: 2;
        }

        .product-card {
            background: linear-gradient(145deg, rgba(88, 28, 135, 0.4), rgba(10, 10, 10, 0.8));
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            transition: all 0.4s ease;
            position: relative;
            border: 1px solid rgba(147, 51, 234, 0.2);
            overflow: hidden;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.1), rgba(88, 28, 135, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .product-card:hover::before {
            opacity: 1;
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 50px rgba(147, 51, 234, 0.4);
            border: 1px solid rgba(147, 51, 234, 0.5);
        }

        .product-card .sale-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #dc2626, #ef4444);
            color: white;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            z-index: 10;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .product-image {
            width: 100%;
            height: 180px;
            background: linear-gradient(135deg, #581c87, #7c3aed, #9333ea);
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            border: 1px solid rgba(147, 51, 234, 0.3);
            position: relative;
            overflow: hidden;
        }

        .product-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .product-card:hover .product-image::before {
            transform: translateX(100%);
        }

        .product-title {
            color: #e0e7ff;
            font-weight: 700;
            margin-bottom: 12px;
            font-size: 1.1rem;
            position: relative;
            z-index: 2;
        }

        .product-price {
            color: #c084fc;
            font-weight: 800;
            font-size: 1.2rem;
            text-shadow: 0 0 15px rgba(192, 132, 252, 0.6);
            position: relative;
            z-index: 2;
        }

        .old-price {
            color: #a1a1aa;
            text-decoration: line-through;
            margin-right: 12px;
            font-weight: 500;
        }

        .stars {
            color: #ffd700;
            margin-top: 8px;
            font-size: 1.1rem;
            position: relative;
            z-index: 2;
        }

        /* Efectos galácticos mejorados */
        .galaxy-element {
            position: absolute;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, #9333ea 0%, rgba(147, 51, 234, 0.5) 50%, transparent 70%);
            border-radius: 50%;
            animation: galaxy-drift 12s ease-in-out infinite;
            box-shadow: 0 0 10px rgba(147, 51, 234, 0.8);
        }

        .nebula-bg {
            position: absolute;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(147, 51, 234, 0.2) 0%, rgba(88, 28, 135, 0.15) 40%, transparent 70%);
            border-radius: 50%;
            animation: nebula 25s linear infinite;
            filter: blur(1px);
        }

        @keyframes galaxy-drift {
            0%, 100% { transform: translateX(0) translateY(0) scale(1); }
            25% { transform: translateX(15px) translateY(-8px) scale(1.2); }
            50% { transform: translateX(-8px) translateY(15px) scale(0.8); }
            75% { transform: translateX(12px) translateY(8px) scale(1.1); }
        }

        @keyframes nebula {
            0% { transform: rotate(0deg) scale(1); opacity: 0.3; }
            50% { opacity: 0.6; }
            100% { transform: rotate(360deg) scale(1); opacity: 0.3; }
        }

        /* Responsive mejorado */
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .hero-content h1 {
                font-size: 2.5rem;
            }

            .nav {
                gap: 20px;
            }

            .garment-selector {
                grid-template-columns: 1fr;
            }

            .color-palette {
                grid-template-columns: repeat(4, 1fr);
            }

            .garment-display {
                width: 100%;
                max-width: 320px;
                height: 400px;
            }

            .container {
                padding: 30px 20px;
            }
        }

        .uploaded-design {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 80px;
            max-height: 80px;
            z-index: 10;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        /* Botones de acción mejorados */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            justify-content: center;
            position: relative;
            z-index: 2;
        }

        .btn-primary {
            background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(147, 51, 234, 0.5);
        }

        .btn-secondary {
            background: transparent;
            color: #c084fc;
            border: 2px solid #9333ea;
            padding: 13px 28px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #9333ea, #c084fc);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(147, 51, 234, 0.4);
        }
    </style>
</head>
<body>
    <div class="nebula-bg" style="top: 15%; left: 10%; animation-delay: 0s;"></div>
    <div class="nebula-bg" style="top: 60%; right: 15%; animation-delay: 8s;"></div>
    <div class="nebula-bg" style="top: 80%; left: 70%; animation-delay: 15s;"></div>
    <div class="galaxy-element" style="top: 25%; left: 75%; animation-delay: 2s;"></div>
    <div class="galaxy-element" style="top: 70%; left: 15%; animation-delay: 5s;"></div>
    <div class="galaxy-element" style="top: 45%; right: 8%; animation-delay: 9s;"></div>
    <div class="galaxy-element" style="top: 10%; left: 40%; animation-delay: 12s;"></div>

    <div class="header">
        <div class="header-content">
            <div class="logo">Closet Stylized</div>
            <nav class="nav">
                <a href="index.html">Inicio</a>
                <a href="diseño.html">Diseñar</a>
                <a href="galeria.html">Galería</a>
                <a href="inicio_de_sesion.html">Iniciar Sesión</a>
                <a href="bordados.html">diseño bordado</a>
                <a href="moodboard.html">colaboraciones</a>
                <a href="restricciones.html">consejos de diseño</a>
                <a href="carrito.html">carrito</a>
            </nav>
        </div>
    </div>


    
    <div class="container">
        <div class="section-title">Estudio de Diseño Inteligente</div>
        
        <div class="main-content">
            <div class="design-area">
                <div class="garment-display" id="garmentDisplay">
                    <div class="view-controls">
                        <button class="view-btn active" onclick="switchView('3d')" id="btn3d">3D</button>
                    </div>

                    <model-viewer 
                        id="modelViewer"
                        crossorigin="anonymous"
                        src="prendas_CS/camisa_shirt/scene.gltf"
                        alt="Prenda 3D Personalizable"
                        auto-rotate
                        camera-controls
                        ar
                        ar-modes="webxr scene-viewer quick-look"
                        camera-orbit="0deg 90deg 2.5m"
                        min-camera-orbit="auto auto 1.5m"
                        max-camera-orbit="auto auto 4m"
                        loading="lazy"
                        reveal="auto"
                        exposure="1"
                        shadow-intensity="1"
                        environment-image="neutral">
                        
                        <div id="progressBar" slot="progress-bar" style="
                            display: block;
                            width: 40%;
                            height: 6px;
                            position: absolute;
                            left: 50%;
                            top: 50%;
                            transform: translate3d(-50%, -50%, 0);
                            border-radius: 25px;
                            background-color: rgba(147, 51, 234, 0.3);
                            border: 1px solid #9333ea;
                            overflow: hidden;">
                            <div id="progressBarInner" style="
                                background: linear-gradient(135deg, #9333ea, #c084fc);
                                width: 0%;
                                height: 100%;
                                border-radius: 25px;
                                transition: width 0.3s;
                                box-shadow: 0 0 10px rgba(147, 51, 234, 0.8);"></div>
                        </div>

                        <div slot="error" style="
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            background: linear-gradient(135deg, rgba(220, 38, 38, 0.9), rgba(239, 68, 68, 0.8));
                            color: white;
                            padding: 25px;
                            border-radius: 15px;
                            text-align: center;
                            border: 1px solid rgba(220, 38, 38, 0.5);
                            backdrop-filter: blur(10px);">
                            ⚠️ No se pudo cargar el modelo 3D<br>
                            <small style="opacity: 0.8;">Verifica tu conexión a internet</small>
                        </div>
                    </model-viewer>

                    <svg class="garment-svg" id="garmentSvg" viewBox="0 0 200 280" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
                                <feDropShadow dx="2" dy="4" stdDeviation="3" flood-color="#000" flood-opacity="0.3"/>
                            </filter>
                        </defs>
                        <path id="garmentPath" d="M50 50 L50 80 L40 90 L40 260 L160 260 L160 90 L150 80 L150 50 L130 50 L130 40 L70 40 L70 50 Z" 
                              fill="#FF6B6B" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
                        <circle cx="85" cy="60" r="3" fill="#333" opacity="0.3"/>
                        <circle cx="115" cy="60" r="3" fill="#333" opacity="0.3"/>
                    </svg>
                </div>
                
                <div class="garment-info">
                    <h4 id="garmentTitle">👕 Camiseta Personalizada</h4>
                    <p id="garmentSpecs">Material: Algodón Premium | Talla: M | Color: Coral</p>
                </div>

                <div class="price-display">
                    $32.000 COP
                </div>

                <div class="upload-area" id="uploadArea">
                    <div class="upload-circle pulse">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="#c7d2fe">
                            <path d="M0.5 10H2.5V15H18.5V10H20.5V15C20.5 16.11 19.61 17 18.5 17H2.5C1.96957 17 1.46086 16.7893 1.08579 16.4142C0.710714 16.0391 0.5 15.5304 0.5 15V10ZM10.5 0L4.96 5.46L6.38 6.88L9.5 3.75V13H11.5V3.75L14.63 6.88L16.05 5.45L10.5 0Z"/>
                        </svg>
                    </div>
                    <div class="upload-text">Sube o arrastra tu diseño aquí</div>
                    <div class="upload-subtext">Formatos: PNG, JPG, SVG (Máx. 5MB)</div>
                    <input type="file" class="file-input" id="fileInput" accept="image/*">
                </div>

                <div class="action-buttons">
                    <button class="btn-primary" onclick="saveDesign()">Guardar Diseño</button>
                    <button class="btn-secondary" onclick="addToCart()">Añadir al Carrito</button>
                </div>
            </div>
            
            <div class="controls-panel">
                <div class="control-section">
                    <h3>👔 Tipo de Prenda</h3>
                    <div class="garment-selector">
                        <button class="garment-btn active" data-garment="camiseta">👕 Camiseta</button>
                        <button class="garment-btn" data-garment="polo">👔 Polo</button>
                        <button class="garment-btn" data-garment="camisa">👔 Camisa</button>
                        <button class="garment-btn" data-garment="buzo">🧥 Buzo</button>
                        <button class="garment-btn" data-garment="chaqueta">🧥 Chaqueta</button>
                        <button class="garment-btn" data-garment="pantalon">👖 Pantalón</button>
                        <button class="garment-btn" data-garment="short">🩳 Short</button>
                        <button class="garment-btn" data-garment="falda">👗 Falda</button>
                    </div>
                </div>
                
                <div class="control-section">
                    <h3>🎨 Paleta de Colores</h3>
                    <div class="color-palette">
                        <div class="color-option active" data-color="#FF6B6B" style="background-color: #FF6B6B;" title="Coral Vibrante"></div>
                        <div class="color-option" data-color="#4ECDC4" style="background-color: #4ECDC4;" title="Turquesa Brillante"></div>
                        <div class="color-option" data-color="#45B7D1" style="background-color: #45B7D1;" title="Azul Cielo"></div>
                        <div class="color-option" data-color="#96CEB4" style="background-color: #96CEB4;" title="Verde Menta"></div>
                        <div class="color-option" data-color="#FFEAA7" style="background-color: #FFEAA7;" title="Amarillo Suave"></div>
                        <div class="color-option" data-color="#DDA0DD" style="background-color: #DDA0DD;" title="Lavanda Elegante"></div>
                        <div class="color-option" data-color="#FFB3BA" style="background-color: #FFB3BA;" title="Rosa Pastel"></div>
                        <div class="color-option" data-color="#FFD93D" style="background-color: #FFD93D;" title="Amarillo Brillante"></div>
                        <div class="color-option" data-color="#6BCF7F" style="background-color: #6BCF7F;" title="Verde Claro"></div>
                        <div class="color-option" data-color="#4D4D4D" style="background-color: #4D4D4D;" title="Gris Oscuro"></div>
                        <div class="color-option" data-color="#000000" style="background-color: #000000;" title="Negro Clásico"></div>
                        <div class="color-option" data-color="#FFFFFF" style="background-color: #FFFFFF; border: 2px solid #666;" title="Blanco Puro"></div>
                    </div>
                </div>

                <div class="control-section">
                    <h3>📐 Personalización Avanzada</h3>
                    <div style="display: grid; gap: 15px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <label style="color: #c7d2fe; font-weight: 600; min-width: 60px;">Talla:</label>
                            <select style="background: rgba(88, 28, 135, 0.3); border: 1px solid #9333ea; color: white; padding: 8px; border-radius: 8px; flex: 1;">
                                <option value="XS">XS</option>
                                <option value="S">S</option>
                                <option value="M" selected>M</option>
                                <option value="L">L</option>
                                <option value="XL">XL</option>
                                <option value="XXL">XXL</option>
                            </select>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <label style="color: #c7d2fe; font-weight: 600; min-width: 60px;">Material:</label>
                            <select style="background: rgba(88, 28, 135, 0.3); border: 1px solid #9333ea; color: white; padding: 8px; border-radius: 8px; flex: 1;">
                                <option value="algodon" selected>Algodón Premium</option>
                                <option value="poliester">Poliéster</option>
                                <option value="mixto">Mezcla Algodón/Poliéster</option>
                                <option value="organico">Algodón Orgánico</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="products-preview">
            <h3>Productos Destacados de la Comunidad</h3>
            <div class="products-grid">
                <div class="product-card">
                    <div class="product-image">👕</div>
                    <div class="product-title">Camiseta Urban Galaxy</div>
                    <div class="product-price">$32.000 COP</div>
                    <div class="stars">⭐⭐⭐⭐⭐</div>
                </div>
                <div class="product-card">
                    <div class="sale-badge">Oferta</div>
                    <div class="product-image">🧥</div>
                    <div class="product-title">Chaqueta Premium Cosmic</div>
                    <div class="product-price">
                        <span class="old-price">$95.000</span>
                        $85.000 COP
                    </div>
                    <div class="stars">⭐⭐⭐⭐⭐</div>
                </div>
                <div class="product-card">
                    <div class="product-image">👖</div>
                    <div class="product-title">Pantalón Stellar Casual</div>
                    <div class="product-price">
                        <span class="old-price">$50.000</span>
                        $42.000 COP
                    </div>
                    <div class="stars">⭐⭐⭐⭐⭐</div>
                </div>
                <div class="product-card">
                    <div class="product-image">🧥</div>
                    <div class="product-title">Buzo Deportivo Nebula</div>
                    <div class="product-price">$45.000 COP</div>
                    <div class="stars">⭐⭐⭐⭐⭐</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentView = '3d';
        
        const garmentShapes = {

            camiseta: {
                path: "M45 45 L45 75 L35 85 L35 270 L165 270 L165 85 L155 75 L155 45 L135 45 L135 30 L65 30 L65 45 Z",
                title: "👔 Camiseta Personalizada",
                details: '<rect x="75" y="40" width="20" height="10" fill="#333" opacity="0.1" rx="5"/><circle cx="85" cy="50" r="2" fill="#333" opacity="0.4"/><circle cx="100" cy="50" r="2" fill="#333" opacity="0.4"/><circle cx="115" cy="50" r="2" fill="#333" opacity="0.4"/>',
                price: "$48.000 COP",
                model: "prendas_CS/camiseta/scene.gltf"
            },
            buzo: {
                path: "M45 55 L45 85 L35 95 L35 275 L165 275 L165 95 L155 85 L155 55 L140 55 L140 35 L125 35 L125 25 L75 25 L75 35 L60 35 L60 55 Z",
                title: "🧥 Buzo Personalizado",
                details: '<rect x="75" y="30" width="50" height="15" fill="#333" opacity="0.2" rx="7"/><circle cx="90" cy="50" r="3" fill="#333" opacity="0.3"/><circle cx="110" cy="50" r="3" fill="#333" opacity="0.3"/>',
                price: "$45.000 COP",
                model: "buzo/scene.gltf"
            },
            chaqueta: {
                path: "M40 50 L40 80 L30 90 L30 280 L80 280 L80 270 L120 270 L120 280 L170 280 L170 90 L160 80 L160 50 L145 50 L145 30 L55 30 L55 50 Z",
                title: "🧥 Chaqueta Personalizada",
                details: '<rect x="70" y="35" width="60" height="25" fill="#333" opacity="0.15" rx="5"/><circle cx="75" cy="45" r="2" fill="#333" opacity="0.5"/><circle cx="85" cy="45" r="2" fill="#333" opacity="0.5"/><circle cx="95" cy="45" r="2" fill="#333" opacity="0.5"/>',
                price: "$85.000 COP",
                model: "prendas_CS/metaretail_chaqueta_roja_con_percha/scene.gltf"
            },
            pantalon: {
                path: "M60 40 L60 150 L55 150 L55 270 L85 270 L85 150 L115 150 L115 270 L145 270 L145 150 L140 150 L140 40 Z",
                title: "👖 Pantalón Personalizado",
                details: '<rect x="70" y="45" width="60" height="20" fill="#333" opacity="0.1" rx="3"/><circle cx="90" cy="55" r="2" fill="#333" opacity="0.4"/><circle cx="110" cy="55" r="2" fill="#333" opacity="0.4"/>',
                price: "$42.000 COP",
                model: "prendas_CS/pantalon_gris_nexus_tours/scene.gltf"
            },
            short: {
                path: "M60 40 L60 120 L55 120 L55 180 L85 180 L85 120 L115 120 L115 180 L145 180 L145 120 L140 120 L140 40 Z",
                title: "🩳 Short Personalizado",
                details: '<rect x="70" y="45" width="60" height="15" fill="#333" opacity="0.1" rx="3"/><circle cx="85" cy="52" r="2" fill="#333" opacity="0.4"/><circle cx="115" cy="52" r="2" fill="#333" opacity="0.4"/>',
                price: "$28.000 COP",
                model: "prendas_CS/man_shorts/scene.gltf"
            },
            falda: {
                path: "M70 40 L70 100 L50 180 L150 180 L130 100 L130 40 Z",
                title: "👗 Falda Personalizada",
                details: '<rect x="80" y="45" width="40" height="15" fill="#333" opacity="0.1" rx="3"/><circle cx="90" cy="52" r="2" fill="#333" opacity="0.3"/><circle cx="110" cy="52" r="2" fill="#333" opacity="0.3"/>',
                price: "$35.000 COP",
                model: "prendas_CS/falda-_skirt/scene.gltf"
            }
        };

        const colorMapping = {
            '#FF6B6B': { name: 'Coral Vibrante', rgb: [1.0, 0.42, 0.42] },
            '#4ECDC4': { name: 'Turquesa Brillante', rgb: [0.31, 0.80, 0.77] },
            '#45B7D1': { name: 'Azul Cielo', rgb: [0.27, 0.72, 0.82] },
            '#96CEB4': { name: 'Verde Menta', rgb: [0.59, 0.81, 0.71] },
            '#FFEAA7': { name: 'Amarillo Suave', rgb: [1.0, 0.92, 0.65] },
            '#DDA0DD': { name: 'Lavanda Elegante', rgb: [0.87, 0.63, 0.87] },
            '#FFB3BA': { name: 'Rosa Pastel', rgb: [1.0, 0.70, 0.73] },
            '#FFD93D': { name: 'Amarillo Brillante', rgb: [1.0, 0.85, 0.24] },
            '#6BCF7F': { name: 'Verde Claro', rgb: [0.42, 0.81, 0.50] },
            '#4D4D4D': { name: 'Gris Oscuro', rgb: [0.30, 0.30, 0.30] },
            '#000000': { name: 'Negro Clásico', rgb: [0.05, 0.05, 0.05] },
            '#FFFFFF': { name: 'Blanco Puro', rgb: [0.95, 0.95, 0.95] }
        };

        let currentGarment = 'camiseta';
        let currentColor = '#FF6B6B';
        let uploadedDesign = null;

        const garmentSvg = document.getElementById('garmentSvg');
        const garmentPath = document.getElementById('garmentPath');
        const garmentTitle = document.getElementById('garmentTitle');
        const garmentSpecs = document.getElementById('garmentSpecs');
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const priceDisplay = document.querySelector('.price-display');
        const modelViewer = document.getElementById('modelViewer');

        function switchView(viewType) {
            const btn3d = document.getElementById('btn3d');
            const btn2d = document.getElementById('btn2d');
            
            if (viewType === '3d') {
                currentView = '3d';
                modelViewer.style.display = 'block';
                garmentSvg.style.display = 'none';
                btn3d.classList.add('active');
                if (btn2d) btn2d.classList.remove('active');
            } else {
                currentView = '2d';
                modelViewer.style.display = 'none';
                garmentSvg.style.display = 'block';
                if (btn3d) btn3d.classList.remove('active');
                if (btn2d) btn2d.classList.add('active');
            }
        }

        function load3DModel(garmentType) {
            const garment = garmentShapes[garmentType];
            if (garment && garment.model) {
                const progressBar = document.getElementById('progressBar');
                const progressBarInner = document.getElementById('progressBarInner');
                
                progressBar.style.display = 'block';
                progressBarInner.style.width = '0%';
                
                modelViewer.src = garment.model;

                // Ajusta la cámara para camiseta y camisa
                if (garmentType === 'camiseta' || garmentType === 'camisa') {
                    modelViewer.setAttribute('camera-orbit', '0deg 90deg 3.2m');
                    modelViewer.setAttribute('min-camera-orbit', 'auto auto 2m');
                } else {
                    modelViewer.setAttribute('camera-orbit', '0deg 90deg 2.5m');
                    modelViewer.setAttribute('min-camera-orbit', 'auto auto 1.5m');
                }

                modelViewer.addEventListener('load', function() {
                    update3DColor(currentColor);
                    progressBar.style.display = 'none';
                }, { once: true });
            }
        }

        function update3DColor(colorHex) {
            if (modelViewer.model && colorMapping[colorHex]) {
                const [r, g, b] = colorMapping[colorHex].rgb;
                
                try {
                    modelViewer.model.materials.forEach(material => {
                        if (material.pbrMetallicRoughness) {
                            material.pbrMetallicRoughness.setBaseColorFactor([r, g, b, 1.0]);
                        }
                    });
                    console.log(`Color 3D actualizado a: ${colorMapping[colorHex].name} [${r}, ${g}, ${b}]`);
                } catch (error) {
                    console.log('Modelo aún no cargado completamente, aplicando color más tarde...');
                }
            }
        }

        function updateGarment(garmentType) {
            const garment = garmentShapes[garmentType];
            
            garmentPath.setAttribute('d', garment.path);
            garmentPath.setAttribute('fill', currentColor);
            
            const existingDetails = garmentSvg.querySelector('.garment-details');
            if (existingDetails) {
                existingDetails.remove();
            }
            
            const detailsGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            detailsGroup.classList.add('garment-details');
            detailsGroup.innerHTML = garment.details;
            garmentSvg.appendChild(detailsGroup);
            
            load3DModel(garmentType);
            
            garmentTitle.textContent = garment.title;
            priceDisplay.textContent = garment.price;
            updateSpecs();
        }

        function updateSpecs() {
            const colorName = colorMapping[currentColor]?.name || 'Personalizado';
            const sizeSelect = document.querySelector('select');
            const materialSelect = document.querySelectorAll('select')[1];
            const size = sizeSelect ? sizeSelect.value : 'M';
            const material = materialSelect ? materialSelect.options[materialSelect.selectedIndex].text : 'Algodón Premium';
            
            garmentSpecs.textContent = `Material: ${material} | Talla: ${size} | Color: ${colorName}`;
        }

        function saveDesign() {
            // Simular guardado de diseño
            const designData = {
                garment: currentGarment,
                color: currentColor,
                uploadedDesign: uploadedDesign ? uploadedDesign.src : null,
                timestamp: new Date().toISOString()
            };
            
            // Mostrar notificación de éxito
            showNotification('🎨 Diseño guardado exitosamente', 'success');
            console.log('Diseño guardado:', designData);
        }

        function addToCart() {
            // Simular añadir al carrito
            const cartData = {
                garment: currentGarment,
                color: currentColor,
                price: garmentShapes[currentGarment].price,
                uploadedDesign: uploadedDesign ? uploadedDesign.src : null
            };
            
            // Actualizar contador del carrito
            const cartElement = document.querySelector('.cart');
            let currentCount = parseInt(cartElement.textContent.match(/\d+/)[0]);
            cartElement.textContent = `🛒 ${currentCount + 1}`;
            
            showNotification('🛒 Producto añadido al carrito', 'success');
            console.log('Añadido al carrito:', cartData);
        }

        function showNotification(message, type = 'info') {
            // Crear notificación
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, ${type === 'success' ? '#10b981, #34d399' : '#9333ea, #c084fc'});
                color: white;
                padding: 15px 25px;
                border-radius: 15px;
                font-weight: 600;
                z-index: 10000;
                animation: slideIn 0.3s ease;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(255, 255, 255, 0.2);
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Remover después de 3 segundos
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Añadir estilos de animación para las notificaciones
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Event listeners para selección de prenda
        document.querySelectorAll('.garment-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.garment-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentGarment = btn.dataset.garment;
                updateGarment(currentGarment);
            });
        });

        // Event listeners para selección de color
        document.querySelectorAll('.color-option').forEach(colorBtn => {
            colorBtn.addEventListener('click', () => {
                document.querySelectorAll('.color-option').forEach(c => c.classList.remove('active'));
                colorBtn.classList.add('active');
                currentColor = colorBtn.dataset.color;
                
                garmentPath.setAttribute('fill', currentColor);
                update3DColor(currentColor);
                updateSpecs();
            });
        });

        // Event listeners para los selectores
        document.querySelectorAll('select').forEach(select => {
            select.addEventListener('change', updateSpecs);
        });

        // Funcionalidad de carga de archivos
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            if (e.dataTransfer.files.length > 0) {
                fileInput.files = e.dataTransfer.files;
                handleFileUpload(fileInput.files[0]);
            }
        });

        fileInput.addEventListener('change', () => {
            if (fileInput.files.length > 0) {
                handleFileUpload(fileInput.files[0]);
            }
        });

        function handleFileUpload(file) {
            if (file && file.type.startsWith('image/')) {
                if (file.size > 5 * 1024 * 1024) {
                    showNotification('⚠️ El archivo es muy grande (máx. 5MB)', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    if (uploadedDesign) {
                        uploadedDesign.remove();
                    }
                    
                    uploadedDesign = document.createElement('img');
                    uploadedDesign.src = e.target.result;
                    uploadedDesign.classList.add('uploaded-design');
                    
                    if (currentView === '2d') {
                        garmentSvg.appendChild(uploadedDesign);
                    } else {
                        const overlay = document.createElement('div');
                        overlay.style.cssText = `
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            z-index: 100;
                            opacity: 0.9;
                            pointer-events: none;
                        `;
                        overlay.appendChild(uploadedDesign);
                        document.getElementById('garmentDisplay').appendChild(overlay);
                    }
                    
                    showNotification('✨ Diseño cargado exitosamente', 'success');
                };
                reader.readAsDataURL(file);
            } else {
                showNotification('⚠️ Por favor, sube un archivo de imagen válido', 'error');
            }
        }

        // Inicialización del modelo 3D
        window.addEventListener('load', function() {
            const progressBar = document.getElementById('progressBar');
            const progressBarInner = document.getElementById('progressBarInner');

            // Manejar el progreso de carga
            modelViewer.addEventListener('progress', (event) => {
                const progress = event.detail.totalProgress * 100;
                progressBarInner.style.width = progress + '%';
            });

            // Ocultar el indicador de carga cuando el modelo esté listo
            modelViewer.addEventListener('load', function() {
                progressBar.style.display = 'none';
                update3DColor(currentColor);
            });

            // También ocultar el indicador si hay un error
            modelViewer.addEventListener('error', function() {
                progressBar.style.display = 'none';
                showNotification('⚠️ Error al cargar el modelo 3D', 'error');
            });

            // Cargar el modelo inicial
            load3DModel(currentGarment);
            updateSpecs();
        });

        // Efectos adicionales para mejorar la experiencia
        document.addEventListener('DOMContentLoaded', function() {
            // Añadir efecto de respiración a elementos importantes
            const importantElements = document.querySelectorAll('.price-display, .btn-primary');
            importantElements.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    el.style.transform = 'scale(1.05)';
                    el.style.transition = 'all 0.3s ease';
                });
                
                el.addEventListener('mouseleave', () => {
                    el.style.transform = 'scale(1)';
                });
            });

            // Efecto parallax suave para elementos de fondo
            window.addEventListener('scroll', () => {
                const scrolled = window.pageYOffset;
                const nebulas = document.querySelectorAll('.nebula-bg');
                const galaxies = document.querySelectorAll('.galaxy-element');
                
                nebulas.forEach((nebula, index) => {
                    const speed = 0.5 + (index * 0.2);
                    nebula.style.transform = `translateY(${scrolled * speed}px) rotate(${scrolled * 0.1}deg)`;
                });
                
                galaxies.forEach((galaxy, index) => {
                    const speed = 0.3 + (index * 0.1);
                    galaxy.style.transform = `translateY(${scrolled * speed}px)`;
                });
            });
        });
    </script>
</body>
</html>